!function(e){try{e()}catch(o){}}(function(){function e(){function e(e,o){"keypre"===e&&(r.keypre=o),"domain"===e&&(r.domain=o)}function o(e){var o;return e=r.keypre?r.keypre+e:e,o=document.cookie.match(new RegExp("(^| )"+e+"=")),null!==o}function i(e){var o;return e=r.keypre?r.keypre+e:e,o=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)")),null!==o?decodeURIComponent(o[2]):null}function n(e,o,i,n,t){var d,c=n||r.keypre,a="",u=t||r.domain||"",l="";i=i||0,"number"==typeof i&&(d=new Date,d.setTime(d.getTime()+1e3*i),a="; expires="+d.toGMTString()),u&&(u="; domain="+u),l="; path=/",e=c?c+e:e,o=escape(o),document.cookie=e+"="+o+a+u+l}function t(e){if("string"==typeof e)o(e)&&n(e,"",-10);else for(var i=0,t=e.length;t>i;i++)o(e[i])&&n(e[i],"",-10)}var r={keypre:"",domain:""};return{hasKey:o,get:i,set:n,remove:t,config:e}}function o(){function e(e){return localStorage.getItem(n+e)}function o(e,o){localStorage.setItem(n+e,o)}function i(e){localStorage.removeItem(n+e)}var n=l.cookiePre;return{get:e,set:o,remove:i}}function i(e){var o=[];for(var i in e)o.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return o.join("&")}function n(e){if(e=e||{},!e.url||!e.callback)throw new Error("参数不合法，检查url或callback");var o=("jsonp_"+Math.random()).replace(".",""),n=document.getElementsByTagName("head")[0];e.data[e.callback]=o;var t=i(e.data),r=document.createElement("script");n.appendChild(r),window[o]=function(i){n.removeChild(r),clearTimeout(r.timer),window[o]=null,e.success&&e.success(i)},r.src=e.url+"?"+t,e.time&&(r.timer=setTimeout(function(){window[o]=null,n.removeChild(r),e.error&&e.error()},e.time))}function t(e){window.getDouYuDid=e,window.$ROOM&&(window.$ROOM.device_id=e),m.set("did",e,l.cookieExpire,l.dyCookiePre)}function r(e){m.set("did",e,l.cookieExpire,null,l.rootDomain),f.set("did",e),t(e)}function d(){var e=window.passport_host||"/";n({url:e+"lapi/did/api/get",data:{client_id:window.client_id||1},callback:"callback",time:3e3,success:function(e){e&&0===+e.error&&"object"==typeof e.data&&null!==e.data?(l.did=e.data.did,r(l.did)):r(l.defaultDid)},error:function(){r(l.defaultDid)}})}function c(e){switch(e){case 1:l.did=m.get("did"),f.set("did",l.did),t(l.did);break;case 2:l.did=f.get("did"),m.set("did",l.did,l.cookieExpire,null,l.rootDomain),t(l.did);break;case 3:d()}}function a(e){var o=e;if(e&&32!==e.length)try{var i=JSON.parse(e.replace(/\\"/g,""));o=i.v&&32===i.v.length?i.v:""}catch(n){o=""}return o}function u(){var e=m.get("did"),o=f.get("did");e=a(e),o=a(o);var i=e&&"undefined"!==e&&e!==l.defaultDid?1:o&&"undefined"!==o&&o!==l.defaultDid?2:3;c(i)}var l={did:"",rootDomain:document.domain.split(".").slice(-2).join("."),defaultDid:"10000000000000000000000000001501",dyCookiePre:window.$SYS&&$SYS.cookie_pre?$SYS.cookie_pre:"",cookiePre:"dy_",cookieExpire:31536e4},m=e(),f=o();m.config("keypre",l.cookiePre),m.config("domain",""),u()});