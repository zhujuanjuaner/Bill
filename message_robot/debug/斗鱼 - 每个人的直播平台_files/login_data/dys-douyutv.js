!function(e){window.DYS=e}(function(){var e={},t=["property","install","uninstall","isPluginIn"],n={property:{loadtime:(new Date).getTime(),version:"2.0"},install:function(n,i){var o="[object Object]"==={}.toString.call(n);if(!o||!n.id&&!n.prop||void 0===n.handle)return!1;for(var r=n.prop||n.id,a=n.handle,c=0,u=t.length;u>c;c++)if(r===t[c])return!1;this[r]?i===!0&&(this[r]=a,e[r]++):(this[r]=a,e[r]=1)},uninstall:function(t){this.isPluginIn(t)&&(delete this[t],delete e[t])},isPluginIn:function(t){t=String(t);for(var n in e)if(t===String(n))return!0;return!1}};return n.install({id:"sence",handle:{}}),n}()),function(e){DYS.install({id:"field",handle:e})}(function(){var e=[],t=[],n=[],i=function(){return i.sence};return i.each=function(t){for(var n=e,i=0,o=n.length;o>i&&t(n[i],i)!==!1;i++);},i.filter=function(t){if(!t)return!1;if(!e||!e.length)return t;var n={};return i.each(function(e){var o=e.name,r=void 0===t[o]?i.defval(e.value):t[o];o=e.nick||o,n[o]=r}),n},i.format=function(o,r){if(!o)return!1;e=r?n:t;for(var a="[object Array]"==={}.toString.call(o)?o:[o],c=0,u=a.length;u>c;c++)a[c]=i.filter(a[c]);return a},i.get=function(){var t={};return e=n,i.each(function(e){var n=e.name,o=i.defval(e.value);n=n,t[n]=o}),t},i.config=function(e){e=e||{},e.sence&&(i.sence=e.sence),e.keys&&(t=e.keys),e.v2keys&&(n=e.v2keys)},i.defval=function(e){return"function"==typeof e?e():e},i}()),function(e){DYS.install({id:"point",handle:e})}(function(){var e=window.jQuery,t={join:".",max_count:4,elattr:{page:"data-page-point",point1:"data-point",point2:"data-point-2",point3:"data-point-3"}},n={property:t.elattr,make:function(){var n,i=[].slice.call(arguments);return n=1===i.length?e.isArray(i[0])?i[0].join(t.join):i[0]:i.join(t.join),this.format(n)},page:function(){var n,i,o=[e("body").attr(t.elattr.page)],r=[].slice.call(arguments);return 1===r.length?"[object Array]"===Object.prototype.toString.call(r[0])?n=o.concat(r[0]):(o.push(r[0]),n=o):n=o.concat(r),i=this.make(n)},pagep:function(){return e("body").attr(t.elattr.page)},area:function(n){var i,o=e(n).eq(0);return o.attr(t.elattr.point1)?i=this._area_1(n):o.attr(t.elattr.point2)?i=this._area_2(n):o.attr(t.elattr.point3)&&(i=this._area_3(n)),i},_area_1:function(n){var i=e(n).eq(0),o=i.attr(t.elattr.point1),r=this.page(o);return r},_area_2:function(n){var i=e(n).eq(0),o=i.attr(t.elattr.point2),r=i.closest("["+t.elattr.point1+"]").attr(t.elattr.point1)||0,a=this.page(r,o);return a},_area_3:function(n){var i=e(n).eq(0),o=i.attr(t.elattr.point3),r=i.closest("["+t.elattr.point2+"]").attr(t.elattr.point2)||0,a=i.closest("["+t.elattr.point1+"]").attr(t.elattr.point1)||0,c=this.page(a,r,o);return c},format:function(e){if(!e)return e;var n=e.split(t.join);if(n.length>t.max_count)return n.slice(0,t.max_count).join(t.join);if(n.length>=0&&n.length<t.max_count){for(var i=t.max_count-n.length,o=0;i>o;o++)n.push(0);return n.join(t.join)}return e}};return n}()),function(e){DYS.install({id:"submit",handle:e})}(function(){var e={suburl:"",subtype:{ajax:"ajax",form:"form",image:"image"},filter:null,IE7:navigator.appVersion.indexOf("MSIE 7.0")>0},t=function(e,t){return};return t.config=function(t){t=t||{},t.suburl&&(e.suburl=t.suburl),$.isFunction(t.filter)&&(e.filter=t.filter)},t._data_15=function(e){return{multi:JSON.stringify(e),v:"1.5"}},t._by_ajax=function(n){var i=e.suburl,o=DYS.field.format(n),r=t._data_15(o);return e.IE7?$.ajax(i,{type:"post",dataType:"jsonp",data:r}):$.post(i,r)},t._by_java=function(n){var i=!1,o="http://192.168.81.24/dot.do",r="http://dot.douyucdn.cn/dot.do",a=i?o:r,c=DYS.field.format(n),u=t._data_15(c);return e.IE7?$.ajax(a,{type:"post",dataType:"jsonp",data:u}):$.post(a,u)},t._by_form=function(e){},t._by_image=function(e){},t}()),function(e){DYS.install({id:"client",handle:e})}(function(){function e(){var e=navigator.userAgent,t="Win32"==navigator.platform||"Windows"==navigator.platform,n="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;if(n)return"MacOS";var i="X11"==navigator.platform&&!t&&!n;if(i)return"Unix";var o=String(navigator.platform).indexOf("Linux")>-1;if(o)return"Linux";if(t){var r=e.indexOf("Windows NT 5.0")>-1||e.indexOf("Windows 2000")>-1;if(r)return"Windows2000";var a=e.indexOf("Windows NT 5.1")>-1||e.indexOf("Windows XP")>-1;if(a)return"WindowsXP";var c=e.indexOf("Windows NT 5.2")>-1||e.indexOf("Windows 2003")>-1;if(c)return"Windows2003";var u=e.indexOf("Windows NT 6.0")>-1||e.indexOf("Windows Vista")>-1;if(u)return"Windows Vista";var s=e.indexOf("Windows NT 6.1")>-1||e.indexOf("Windows 7")>-1;if(s)return"Windows7";var f=e.indexOf("Windows NT 10")>-1||e.indexOf("Windows 10")>-1;return f?"Win10":"windows"}return"other"}function t(){var e=navigator.userAgent.toLowerCase(),t=/msie [\d.]+;/gi,n=/firefox\/[\d.]+/gi,i=/chrome\/[\d.]+/gi,o=/safari\/[\d.]+/gi;return e.indexOf("msie")>0?e.match(t)[0]:e.indexOf("firefox")>0?e.match(n)[0]:e.indexOf("chrome")>0?e.match(i)[0]:e.indexOf("safari")>0&&e.indexOf("chrome")<0?e.match(o)[0]:void 0}function n(){var e=navigator.userAgent.toLowerCase();return e.indexOf("win64")>=0||e.indexOf("wow64")>=0?"x64":navigator.cpuClass}function i(){var e=navigator.language;return e||(e=navigator.browserLanguage),e}function o(){var e="";return navigator.languages&&(e=navigator.languages.join(",")),e}function r(){return window.localStorage&&window.localStorage.getItem?1:0}function a(){return window.localStorage&&window.localStorage.getItem?1:0}var c=function(){var c={};return c.t_stamp=Date.parse(new Date),c.br_nv=t()||"other",c.br_l=i()||"",c.supp_ck=navigator.cookieEnabled?1:0,c.sys_vt=e(),c.scr_rw=window.screen.width,c.scr_rh=window.screen.height,c.br_w=window.outerWidth,c.br_h=window.outerHeight,c.html_w=document.body.clientWidth,c.html_h=document.body.clientHeight,c.ws_x=window.screenLeft?window.screenLeft:window.screenX,c.ws_y=window.screenTop?window.screenTop:window.screenY,c.sc_c=n(),c.scr_sw=document.documentElement.clientWidth,c.scr_sh=document.documentElement.clientHeight,c.version="2.0",c.lage=i(),c.lages=o(),c.tzone=(new Date).getTimezoneOffset(),c.isse=r(),c.iude=a(),c.ca=n(),c};return c}()),function(e){DYS.install({id:"sub",handle:e})}(function(){function e(e){if(!o.ucp_front)return!1;var n=DYS.field.format(e,"2.0")[0],i=t(n);i.length>=o.maxLength&&(a._list_by_ajax(),clearInterval(r),r=setInterval(function(){a._list_by_ajax()},o.maxTime))}function t(e){try{var t=window.localStorage.getItem("kpl");return t=t?JSON.parse(decodeURIComponent(t)):t=[],t.length>=o.saveMaxMun?t:("[object Array]"===Object.prototype.toString.call(e)?t=t.concat(e):"[object Object]"===Object.prototype.toString.call(e)&&t.push(e),t.splice(o.saveMaxMun-1,t.length-o.saveMaxMun),window.localStorage.setItem("kpl",encodeURIComponent(JSON.stringify(t))),t)}catch(n){window.localStorage.setItem("kpl","")}}function n(e){for(var t in o.whiteList)if(o.whiteList[t]===e.action_code)return!0;return!1}function i(e){if(e.action_code&&e.action_code.indexOf("init")>=0)return!0;for(var t=!1,n=0;n<o.extBrowserPoint.length;n++)if(o.extBrowserPoint[n]===e.action_code){t=!0;break}return t||!1}var o={suburl:"",ucp_front:"",fh_edge:"",flash_url:"",subtype:{ajax:"ajax",form:"form",image:"image",flash:"flash"},extBrowserPoint:["show_sign_succ","show_sign_other_succ"],whiteList:["show_recommend_livelist_room","show_recom_video","click_recommend_livelist_room","show_recommend_dyrecom_room","show_recommend_anchorlove_room","click_btop_cleand_room","show_giftbar_activity","show_list_tag_module","show_recom_video","click_shield_gift_select","show_title_mgamead","init_page_live","show_taglist_mgamead","show_recommend_dyrecom_room","show_ad_cps_source","click_hm_md"],extendField:{page_code:""},pro_code:"",filter:null,maxTime:3e4,maxLength:20,saveMaxMun:40,IE7:navigator.appVersion.indexOf("MSIE 7.0")>0},r=setInterval(function(){a._list_by_ajax()},o.maxTime),a=function(t,r){var c=[].slice.call(arguments);if(!o.suburl||!c.length)return!1;if(1===c.length&&(r=t,t=null),r.action_code){var u=DYS.storage.get("refer_action_code")||"";$.extend(!0,o.extendField,{ext:{rac:u}}),DYS.storage.set("refer_action_code",r.action_code)}if(r=$.extend(!0,r,o.extendField),DYS.client&&i(r)&&(r=$.extend(!0,r,{ext:DYS.client()})),n(r)){var s=a["_by_"+o.subtype.ajax];return"function"==typeof s?s(r,!0):null}if(t&&t.kernelFlag)return void(t.realTime?a._by_ajax_java(r):e(r));t?t.type=t.type||o.subtype.ajax:t=t||{type:o.subtype.ajax,queue:!1};var f=String(t.type).toLowerCase(),d=!!t.queue;if(!$.isFunction(o.filter)||o.filter(t,r)!==!1)if(d)DYS.queue.may(r);else{var s=a["_by_"+f];if("function"==typeof s)return s(r)}};return a.config=function(e){e=e||{},e.suburl&&(o.suburl=e.suburl),e.ucp_front&&(o.ucp_front=e.ucp_front),e.fh_edge&&(o.fh_edge=e.fh_edge),e.flash_url&&(o.flash_url=e.flash_url),$.isFunction(e.filter)&&(o.filter=e.filter)},a._data_15=function(e){return{multi:JSON.stringify(e),v:"1.5"}},a._by_ajax=function(e,t){var n=t?o.fh_edge||o.suburl:o.suburl,i=DYS.field.format(e,"2.0"),r=a._data_15(i);return o.IE7?$.ajax(n,{type:"post",dataType:"jsonp",data:r}):$.post(n,r)},a._by_flash=function(e){var t=o.flash_url,n=DYS.field.format(e,"2.0"),i=a._data_15(n),r={type:"post",dataType:"json",data:i};o.IE7&&(r.dataType="jsonp",r.crossDomain=!0),$.ajax(t,r)},a._by_ajax_java=function(e){var t=o.ucp_front,n=DYS.field.format(e,"2.0"),i=a._data_15(n),r={type:"post",dataType:"json",data:i};o.IE7&&(r.dataType="jsonp",r.crossDomain=!0),$.ajax(t,r)},a._list_by_ajax=function(){var e=o.ucp_front,n=window.localStorage.getItem("kpl");if(n){try{n=JSON.parse(decodeURIComponent(n))}catch(i){return void window.localStorage.setItem("kpl","")}var r=a._data_15(n);window.localStorage.setItem("kpl","");var c={type:"post",dataType:"json",data:r,success:function(e){3==e.error&&t(n)},error:function(e){t(n)}};o.IE7&&(c.dataType="jsonp",c.crossDomain=!0),$.ajax(e,c)}},a._by_form=function(e){},a._by_image=function(e){},a.setPublicExt=function(e){"object"==typeof e&&(o.extendField=$.extend(o.extendField,e))},a.getPublicExt=function(){return o.extendField},a.setPageCode=function(e){o.extendField.page_code=e;var t=DYS.storage.get("lastPageCode")||[],n=[];t.unshift(e),n=t.slice(0,2),DYS.storage.set("lastPageCode",n,864e5)},a.getPageCode=function(){return o.extendField.page_code},a.setProCode=function(e){o.pro_code=e},a.getProCode=function(){return o.pro_code},a.getDefaultFied=function(){return $.extend(!0,DYS.field.get(),o.extendField)},a}()),function(e){DYS.install({id:"subv2",handle:e})}(function(){function e(e){return"object"==typeof e&&null!==e}function t(){var e=localStorage.getItem(l.localCacheKey);return e=e?JSON.parse(e):{}}function n(e){localStorage.setItem(l.localCacheKey,JSON.stringify(e))}function i(e){return 2===Number(e.e)}function o(e,t){t=t||{};for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t}function r(e){var t=performance.timing,n=t.navigationStart||t.fetchStart,i=t.loadEventStart||t.domComplete;e.dur=n&&i?i-n:0;var o=f(e);o&&d(o)}function a(e){if(h){var t=Number(e.t);e.t=t-2||1;var n=o(e,{t:3,ot:(new Date).getTime()});"complete"===document.readyState?r(n):document.addEventListener("readystatechange",function(){"complete"===document.readyState&&r(n)})}}function c(e,o){if(g&&p){var r="pac",a="ppc",c="";try{var u=t();o&&(e[r]=u[r]||c),u[r]=e.ac,i(e)&&(u[a]=e.ac),n(u)}catch(s){console.error(s)}}}function u(e,t){var n={action_code:function(e,t){t.ac=e.action_code+""},event_id:function(e,t){t.e=Number(e.event_id)||1},type:function(e,t){t.t=Number(e.type)||1},chan_id:function(e,t){t.cha=e.chan_id},url:function(e,t){t.u=e.url},ref_url:function(e,t){t.ru=e.ref_url},cate_id:function(e,t){t.cid=Number(e.cate_id)||0},tag_id:function(e,t){t.tid=Number(e.tag_id)||0},child_id:function(e,t){t.chid=Number(e.child_id)||0},pos:function(e,t){t.p=Number(e.pos)||0}};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]?n[i](e,t):t[i]=e[i])}function s(e){for(var t={},n=_.length,i=0;n>i;i++){var o=_[i];t[o.key]=o.getValue()||o.defaultValue}switch(u(e,t),t.t){case 7:a(t),c(t,!0);break;case 5:c(t,!0);break;case 3:a(t);default:c(t)}return f(t)}function f(e){e={m:[e],v:l.v};try{var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n+"="+encodeURIComponent("string"==typeof e[n]?e[n]:JSON.stringify(e[n])));return t.join("&")}catch(i){return""}}function d(t){var n=new Image;n.onerror=n.onload=function(){e(n)&&(n=null)},n.src=[l.suburl,"?",t].join("")}var l={suburl:"https://dotserver.douyucdn.cn/fish3/1.gif",v:1.5,localCacheKey:"DYSV2_CACHE"},p=e(JSON)&&"function"==typeof JSON.parse&&"function"==typeof JSON.stringify,g=e(window.localStorage)&&"function"==typeof localStorage.getItem&&"function"==typeof localStorage.setItem,h=e(window.performance)&&e(performance.timing),_=[{key:"d",defaultValue:"",getValue:function(){return DYS.cookie.get("did",$SYS.cookie_pre)}},{key:"i",defaultValue:0,getValue:function(){return parseInt(DYS.cookie.get("uid",$SYS.cookie_pre),10)}},{key:"r",defaultValue:0,getValue:function(){return parseInt(window.$ROOM&&$ROOM.room_id,10)}},{key:"e",defaultValue:1,getValue:function(){return 1}},{key:"t",defaultValue:1,getValue:function(){return 1}},{key:"ot",defaultValue:0,getValue:function(){return(new Date).getTime()}},{key:"ver",defaultValue:"",getValue:function(){return(window.$SYS||{}).res_ver}}],m=function(t,n){if(e(t)){var i=s(t);i&&d(i)}};return m}()),function(e){DYS.install({id:"queue",handle:e.create()})}(function(){var e=function(e){this.init(e)};return e.prototype.init=function(e){e=e||{},this._config={cache:e.cache||[],size:e.size||5},this.may()},e.prototype.release=function(){DYS.submit(this._config.cache),this._config.cache=[]},e.prototype.may=function(){var e=[].slice.call(arguments);if(e.length>1&&(this._config.cache=this._config.cache.concat(e)),1===e.length){var t=e[0],n={}.toString.call(t);"[object Array]"===n?this._config.cache=this._config.cache.concat(t):this._config.cache.push(t)}this._config.cache.length>=this._config.size&&this.release()},e.prototype.config=function(e){e=e||{},"number"==typeof e.size&&e.size>=0&&(this._config.size=e.size)},e.create=function(t){return new e(t)},e}()),function(e){DYS.install({id:"cache",handle:e})}(function(){var e={},t={next:function(t){var n=(new Date).getTime(),i=t||{};return e[n]=i,n},set:function(t,n){e[t]=n},get:function(t){return e[t]},remove:function(t){var n={};for(var i in e)t!==i&&(n[i]=e[i]);e=n},clear:function(){e={}}};return t}()),function(e){DYS.install({id:"cookie",handle:e})}(function(){var e={cookie_pre:"_dys_",page_refer_cookie:"page_refer3",page_refer_max_count:10},t={set:function(t,n,i,o,r){t=e.cookie_pre+t,r=r?"; path="+r:"/",o=o?";domain="+o:"";var a=new Date;a.setTime(a.getTime()+24*i*60*60*1e3);var c="expires="+a.toUTCString();document.cookie=t+"="+n+"; "+c+r+o},hasKey:function(t){var n;return t=e.cookie_pre?e.cookie_pre+t:t,n=document.cookie.match(new RegExp("(^| )"+t+"=")),null!==n},get:function(t,n){t=(n||e.cookie_pre)+t+"=";for(var i=document.cookie.split(";"),o=0;o<i.length;o++){for(var r=i[o];" "==r.charAt(0);)r=r.substring(1);if(-1!=r.indexOf(t))return r.substring(t.length,r.length)}return""},list:function(){for(var t=document.cookie.split(";"),n=[],i=0;i<t.length;i++){for(var o=t[i];" "==o.charAt(0);)o=o.substring(1);if(-1!=o.indexOf(e.cookie_pre)){var r=o.split("="),a=r[0],c=r[1];a&&(a=a.replace(e.cookie_pre,"")),n.push({key:a,value:c})}}return n},remove:function(e,t,n){this.hasKey(e)&&this.set(e,"",-1,n,t)},clear:function(){for(var e=this.list(),t=0,n=e.length;n>t;t++)this.remove(e[t].key)}},n={save:function(e,n,i){var o=location.host.split("."),r="";o=o.slice(o.length-2),o.unshift(""),r=o.join("."),t.set(e,n,i||1,r,"/")},get:function(e,n){return t.get(e,n)},remove:function(e,n){t.remove(e,"/")},clear:function(){t.clear()}};return n}()),function(e){DYS.install({id:"storage",handle:e})}(function(){var e={cookie_pre:"_dys_",page_refer_cookie:"page_refer3",page_refer_max_count:10},t=function(e){this.init(e)};t.prototype={constructor:t,init:function(e){var t=this;this.config=$.extend(!0,{auto:!0,speed:1e4,storage:"localStorage",maxExpireDate:new Date("Fri, 31 Dec 9999 23:59:59 UTC")},e),this.storage=this._getStorageInstance(this.config.storage),this.isSupported=this._isStorageSupported(this.storage),this.config.lock={},this.config.auto===!0&&setInterval(function(){t.removeAllExpires()},this.config.speed)},_isStorageSupported:function(e){var t=!1;if(e&&e.setItem){t=!0;var n="__"+Math.round(1e7*Math.random());try{e.setItem(n,n),e.removeItem(n)}catch(i){t=!1}}return t},_getStorageInstance:function(e){return"string"==typeof e&&window[e]?window[e]:e},_isValidDate:function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},_getExpiresDate:function(e,t){return t=t||new Date,"number"==typeof e?e=e===1/0?this.config.maxExpireDate:new Date(t.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e},_isQuotaExceeded:function(e){var t=!1;if(e)if(e.code)switch(e.code){case 22:t=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===e.name&&(t=!0)}else-2147024882===e.number&&(t=!0);return t},_cacheItem:function(e,t){var n={};return n.c=(new Date).getTime(),t=t||this.config.maxExpireDate,n.e=this._getExpiresDate(t).getTime(),n.v=e,n},_isCacheItem:function(e){return"object"!=typeof e?!1:!!(e&&"c"in e&&"e"in e&&"v"in e)},_checkCacheItemIfEffective:function(e){return(new Date).getTime()<e.e},_checkAndWrapKeyAsString:function(e){return"string"!=typeof e&&(e=String(e)),e},_quotaExceedHandler:function(e,t,n,i){if(void 0===this.config.lock[e]&&(this.config.lock[e]=1),!(this.config.lock[e]>1)){this.removeAllExpires();this.config.lock[e]++;try{this.set(e,t,n)}catch(o){}}},set:function(t,n,i){if(t=e.cookie_pre+t,t=this._checkAndWrapKeyAsString(t),void 0===n)return this.remove(t);var o=JSON.stringify(n),r=this._cacheItem(o,i);try{this.storage.setItem(t,JSON.stringify(r))}catch(a){this._isQuotaExceeded(a)&&this._quotaExceedHandler(t,o,i,a)}return n},get:function(t){var n=null;t=e.cookie_pre+t,t=this._checkAndWrapKeyAsString(t);try{n=JSON.parse(this.storage.getItem(t))}catch(i){return null}if(this._isCacheItem(n)){if(this._checkCacheItemIfEffective(n))return JSON.parse(n.v);this.remove(t)}return null},remove:function(e){return e=this._checkAndWrapKeyAsString(e),this.storage.removeItem(e),this.config.lock[e]=void 0,e},removeAllExpires:function(){var e=[],t=this;return this.each(function(n,i){var o=null;try{o=JSON.parse(t.storage.getItem(n))}catch(r){}null!==o&&void 0!==o.e&&(new Date).getTime()>=o.e&&(e.push(n),t.remove(n))}),e},clear:function(e){var t=this;e===!0?this.storage.clear():this.each(function(e,n){t.remove(e)})},each:function(e,t){var n,i,o=this.storage.length;e="function"==typeof e?e:function(){};for(var r=0;o>r&&(n=this.storage.key(r),null===n||(i=this.get(n),this.storage.length<o&&(o--,r--),null===i&&t!==!0||e.call(this,n,i)!==!1));r++);}};var n=new t({});return n.ext={page:{refer:function(){var t,i,o=e.page_refer_cookie,r=e.page_refer_max_count,a=[].slice.call(arguments);return"clear"===a[0]?n.remove(e.page_refer_cookie):(t=n.get(o),t=t?t.split("."):[],a.length?(i={}.toString.call(a[0]),t="[object Array]"===i?t.concat(a[0]):t.concat(a),t.length>r&&(t=t.slice(t.length-r)),void(t=t.join("."))):t.join("."))}}},n}()),function(e){DYS.install({id:"trigger",handle:e})}(function(){var e=window.jQuery,t={dom_data_attr:"dysdomdata",dom_extdata_attr:"dysdomextdata",data_point_key:"point",data_other_key:"other",trigger_type:{domready:"domready",dompoint:"dompoint",linkrefer:"linkrefer",hot:"hot",heart:"heart",duration:"duration"},isHeatMapSub:Math.random()<.2},n=function(e){var i=[].slice.call(arguments,1);if(e===t.trigger_type.domready)n.domready.apply(this,i);else if(e===t.trigger_type.dompoint)n.dompoint.apply(this,i);else if(e===t.trigger_type.linkrefer)n.linkrefer.apply(this,i);else if(e===t.trigger_type.hot)n.hot.apply(this,i);else{if(e===t.trigger_type.heart)return n.heart.apply(this,i);if(e===t.trigger_type.duration)return n.duration.apply(this,i)}};return n.config=function(e){e=e||{},e.dataPointKey&&(t.data_point_key=e.dataPointKey),e.dataOtherKey&&(t.data_other_key=e.dataOtherKey)},n.IS={linkInvalid:function(e){return!e||"#"===e||0===e.indexOf("javascript:")},stopDYSEvent:function(e){return e.originalEvent?e.originalEvent.stopDYSEvent===!0:e.stopDYSEvent===!0}},n.stopDYSEvent=function(e){e.originalEvent?e.originalEvent.stopDYSEvent=!0:e.stopDYSEvent=!0},n.domready=function(n){e(function(){var i=DYS.point.page(),o=DYS.storage.ext.page.refer(),r={};if(r[t.data_other_key]={},location.search.indexOf("from")>=0){for(var a,c=location.search.replace("?","").split("&"),u=0,s=c.length;s>u;u++)if(c[u].indexOf("from")>=0){a=c[u].split("=")[1];break}a&&(r[t.data_other_key].fr=a)}o&&o.length&&(r[t.data_other_key].refer=o),i&&(r[t.data_point_key]=i,r=e.extend(!0,{},r,n),DYS.submit(r))})},n.dompoint=function(){var i=DYS.point.property,o="["+i.point1+"]",r="["+i.point2+"]",a="["+i.point3+"]",c=[o,r,a];e.each(c,function(i,o){var r=e(o),a=r.not("a"),c=r.find("a");a=a.filter(function(){return!e(this).data(t.dom_data_attr)}),c=c.filter(function(){return!e(this).data(t.dom_data_attr)}),a.length&&n.dompoint._com(a),c.length&&n.dompoint._link(c)})},n.dompoint._com=function(i){var o=e(i);o.each(function(){var n=e(this),i=DYS.point.area(this),o={};o[t.data_point_key]=i,n.data(t.dom_data_attr,o)}),o.on("click",function(i){if(!n.IS.stopDYSEvent(i)){n.stopDYSEvent(i);var o=e(this).data(t.dom_data_attr);DYS.queue.may(o)}})},n.dompoint._link=function(i){var o=e(i);o.each(function(){var i=e(this),o=i.attr("href"),r=DYS.point.area(this),a={},c=null;a[t.data_point_key]=r,n.IS.linkInvalid(o)||(c=DYS.point.pagep()),i.data(t.dom_data_attr,a),c&&i.data(t.dom_extdata_attr,c)}),o.on("mousedown",function(i){if(!n.IS.stopDYSEvent(i)){n.stopDYSEvent(i);var o=e(this),r=(o.data(t.dom_data_attr),o.data(t.dom_extdata_attr));r&&DYS.storage.ext.page.refer(r)}}),o.on("click",function(e){n.stopDYSEvent(e)})},n.linkrefer=function(i){var o=DYS.point.property,r="["+o.point1+"]",a="["+o.point2+"]",c="["+o.point3+"]",u=[r,a,c],s=i?e(i).find("a"):e("a");e.each(u,function(e,t){s=s.not(t)}),s.length&&(s.each(function(){var i=e(this),o=i.attr("href"),r=null;n.IS.linkInvalid(o)||(r=DYS.point.pagep()),r&&i.data(t.dom_extdata_attr,r)}),s.on("mousedown",function(i){if(!n.IS.stopDYSEvent(i)){n.stopDYSEvent(i);var o=e(this),r=o.data(t.dom_extdata_attr);r&&DYS.storage.ext.page.refer(r)}}),s.on("click",function(e){n.stopDYSEvent(e)}))},n.hot=function(e){},n.hot.center=function(t,i){var o=null,r=t?t:document;r.addEventListener("mousedown",function(t){e(t.target).is("a")?n.hot.centerHandle(t,e(r),i):(clearTimeout(o),o=setTimeout(function(){n.hot.centerHandle(t,e(r),i)},200))},!0)},n.hot.centerHandle=function(n,i,o){var r=n.pageY,a=n.pageX,c=i.width(),u=i.height(),s=e(n.target).closest(o.exclude),f=[],d=[];e(n.toElement).is("html,body")||(s.size()>0&&(r=n.offsetY+s.position().top),a=parseInt(a-c/2),f.push(a),f.push(r),d.push(c),d.push(u),t.isHeatMapSub&&DYS.sub({action_code:"click_hm_md",ext:{pos:f.join(","),wh:d.join(","),htype:0}}))},n.hot.left=function(t,i){var o=null,r=t?t:document;r.addEventListener("mousedown",function(t){e(t.target).is("a")?n.hot.leftHandle(t,e(r),i):(clearTimeout(o),o=setTimeout(function(){n.hot.leftHandle(t,e(r),i)},200))})},n.hot.leftHandle=function(n,i,o){var r=n.pageY,a=n.pageX,c=i.width(),u=i.height(),s=e(n.target).closest(o.exclude),f=[],d=[];if(!e(n.toElement).is("html,body")){s.size()>0&&(r=n.offsetY+s.position().top);Number.prototype.toFixed;f.push(a),f.push(r),d.push(c),d.push(u),t.isHeatMapSub&&DYS.sub({action_code:"click_hm_md",ext:{pos:f.join(","),wh:d.join(","),htype:1}})}},n.duration=function(){e(window).on("load",function(){var t=new Date;e(window).on("unload",function(){var e=new Date,n=e-t,i=function(){var e=navigator.userAgent.toLowerCase();return{isMobile:!!e.match(/AppleWebKit.*Mobile.*/i),isDyAndroid:"douyu_android"==e.match(/Douyu_Android/i),isDyIOS:"douyu_ios"==e.match(/Douyu_IOS/i),isIOS:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/i)}}(),o={action_code:"show_page_staydur",ext:{duration:n}};i.isDyIOS||i.isIOS?o.pro_code="ios":i.isDyAndroid&&(o.pro_code="android"),i.isDyAndroid||i.isDyIOS||i.isIOS||i.isMobile?o.ct_code="h5":o.ct_code="web",DYS.sub(o)})})},n}()),function(e){function t(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var o=e.indexOf("Edge/");return o>0?parseInt(e.substring(o+5,e.indexOf(".",o)),10):!1}function n(e){return/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(e)}function i(e){if(n(e)===!1)return e;var i;try{var o=document.createElement("a");o.href=e;var r=o.pathname,a=t();a!==!1&&12>a&&(r="/"+r),i="yuba.douyu.com"===o.hostname&&"#/search"===o.hash?e:"www.douyu.com"===o.hostname&&"/search/"===r?e:"v.douyu.com"===o.hostname&&"/video/search"===r?e:r}catch(c){i=e}return delete o,i}DYS.field.config({sence:"douyutv",keys:[{name:"url",nick:"u",value:function(){var e=location.href;return i(e)}},{name:"point_id",nick:"p",value:""},{name:"did",nick:"d",value:function(){return DYS.cookie.get("did",$SYS.cookie_pre)||""}},{name:"uid",nick:"i",value:function(){return DYS.cookie.get("uid",$SYS.cookie_pre)||0}},{name:"rid",nick:"rid",value:function(){return window.$ROOM&&$ROOM.room_id?$ROOM.room_id:""}},{name:"page_t",nick:"pt",value:function(){return parseInt(DYS.property.loadtime/1e3,10)}},{name:"occur_t",nick:"ot",value:function(){return parseInt((new Date).getTime()/1e3,10)}},{name:"ext",nick:"e",value:""},{name:"device",nick:"a",value:"web"},{name:"version",nick:"v",value:""},{name:"refer",nick:"r",value:function(){var e=document.referrer;return i(e)}},{name:"fp",nick:"fp",value:""}],v2keys:[{name:"did",nick:"d",value:function(){return DYS.cookie.get("did",$SYS.cookie_pre)||""}},{name:"uid",nick:"i",value:function(){return DYS.cookie.get("uid",$SYS.cookie_pre)||0}},{name:"rid",nick:"rid",value:function(){return window.$ROOM&&$ROOM.room_id?$ROOM.room_id:0}},{name:"url",nick:"u",value:function(){var e=location.href;return i(e)}},{name:"refer",nick:"ru",value:function(){var e=document.referrer;return i(e)}},{name:"action_code",nick:"ac",value:""},{name:"ref_page_code",nick:"rpc",value:function(){var e=DYS.storage.get("lastPageCode")||[];return e[e.length-1]}},{name:"page_code",nick:"pc",value:""},{name:"page_t",nick:"pt",value:function(){return parseInt(DYS.property.loadtime,10)}},{name:"occur_t",nick:"oct",value:function(){return parseInt((new Date).getTime(),10)}},{name:"duration",nick:"dur",value:function(){return 0}},{name:"pro_code",nick:"pro",value:function(){var e=DYS.sub.getProCode();return e||"host_site"}},{name:"ct_code",nick:"ct",value:"web"},{name:"ext",nick:"e",value:""},{name:"app_version",nick:"av",value:function(){return DYS.cookie.get("av",$SYS.cookie_pre)||""}},{name:"startup_id",nick:"up",value:function(){return DYS.cookie.get("stn",$SYS.cookie_pre)||""}}]}),DYS.trigger.config({dataPointKey:"point_id",dataOtherKey:"ext"}),DYS.submit.config({suburl:window.$SYS?$SYS.fh||"":""}),DYS.sub.config({suburl:window.$SYS?$SYS.fh2||"":""}),DYS.sub.config({ucp_front:window.$SYS?$SYS.ucp_front||"":""}),DYS.sub.config({fh_edge:window.$SYS?$SYS.fh_edge||"":""}),DYS.sence.douyutv={first:function(){DYS.trigger("duration")},init:function(){DYS.trigger("domready",{ext:{domready:1,ua:navigator.userAgent,pageurl:location.href}}),DYS.trigger("dompoint"),DYS.trigger("linkrefer")},loadready:function(){var e=DYS.point.page();e&&DYS.submit({point_id:e,ext:{loadready:1}})}},DYS.sence.douyutv.first(),e(DYS.sence.douyutv.init)}(window.jQuery);